### 仿真参数
我们用 SimParams 为物理求解器指定参数

### 仿真参数调整
#### 常用参数
+ dt - 仿真时间步长，默认为 1/60 s
+ substeps - 模拟子步骤的数量，默认值为 2。有效的模拟时间步长是 dt/substeps。
dt 参数是用于推进仿真的时间步长，以秒为单位。准确稳定的物理模拟需要相当短的时间步长，通常不到 1/50 秒。时间步长会导致不稳定，尤其是对于快速移动的物体、强大的力或复杂的铰接式装配体。

除了推进模拟之外，我们会有一些代码来查询环境的状态，并在循环的每次迭代期间应用控件。然后，dt 参数确定 actor 与模拟交互的频率。通常，这种交互的频率低于稳定物理模拟所需的频率。num_substeps 参数可用于将每个时间步细分为相等的子区间，以实现稳定的物理模拟。在上面的示例中，dt 为 1/60，因此您可以在每个模拟秒内与模拟交互 60 次。但 num_substeps 为 2，这意味着物理模拟以 1/120 秒的增量前进。这些是默认的仿真参数。

#### Flex
+ solver_type - Flex 有 6 个约束求解器可用，编号如下：
  + 0 - XPBD（GPU）- 一种基于位置的求解器，使用迭代下降法，该方法不如牛顿求解器（如下）准确，但对于中等刚度的系统来说通常快速且稳健。
  + 1 - 牛顿雅可比（GPU）- GPU 上的雅可比求解器（CUDA）
  + 2 - Newton LDLT（CPU）- CPU 上的 Cholesky 后端（Eigen-based）
  + 3 - 牛顿 PCG1（CPU）- CPU 上的预处理共轭梯度（Eigen-based）
  + 4 - 牛顿 PCG2（GPU）- GPU 上的预处理共轭梯度（CUDA）
  + 5 - 牛顿 PCR（GPU）- GPU 上的预处理偶联物残留法（CUDA）

默认和推荐的是 5 - Newton PCR 求解器，CPU 后端对于大型系统可能非常慢，并且主要用于验证目的。
+ num_outer_iterations - 求解器每个仿真子步骤进行的迭代次数。
+ num_inner_iterations - 每次外部迭代的线性求解器迭代次数，仅由牛顿求解器使用。
+ relaxation - 控制求解器的收敛速率。默认值为 0.75 大于 1 的值可能会导致不稳定。牛顿求解器目前使用零速度开始迭代，因此如果收敛得不够，太高的松弛会引入一种相当于 damping = 1 - （1 - relaxation）^numOuterIterations 的数值。
+ shape_collision_distance - 粒子相对于刚性形状保持的距离（以米为单位）（与半径参数分开）。
+ shape_collision_margin - 生成触点的距离（以米为单位）。Flex 使用推测性接触模型，当特征对（例如：顶点/边）在时间步开始时彼此在此距离内时，将生成接触约束。如果物体快速移动，则边距应足够大，以确保在时间步长期间不会错过接触。将其形式化的一种方法是，如果特征行进的最大速度为 v，时间步长为 dt，则边距应为 margin = v*dt/substeps。如果我们从较高的高度放置对象并看到它们“弹出”回来，则可能必须降低碰撞边距（对象相互穿透，然后被弹出）。

提高模拟稳定性（收敛性）和减少穿透的最通用方法是增加子步骤的数量。但它在模拟上可能相当昂贵。其他可尝试的方法包括：
+ 在缺乏收敛的情况下，增加外部和内部迭代的数量可能会有所帮助。不稳定的另一个来源可能是由于初始配置错误和自冲突的存在。可以通过可视化系统中的接触力并在可能的情况下禁用机器人的自碰撞或修复初始配置来诊断它。除了增加子步骤的数量外，在可能的情况下使 shapeCollisionDistance 变大还有助于防止对快速移动的对象进行穿透。如果缓慢移动的系统（如机械臂）中存在穿孔，首先应检查模拟中产生的接触力，并在需要时减少接触力，例如使机器人电机变弱。
+ Flex 中的形状表示是通过三角形网格 - 所有基本形状（包括球体、胶囊体和盒子）在内部都由存储在 GPU BVH 结构中的三角形网格表示（球体和胶囊体可以被视为单个退化三角形 + 厚度）。这种统一的表示意味着 Flex 可以处理动态物理形状的非凸面和任意三角形网格，但与凸面多面体不同的是，三角形汤通常不定义“内部/外部”区域。这意味着一旦发生相互渗透，就无法以明确的方式解决。为避免穿插，建议在碰撞形状上使用足够厚的层。


#### PhysX

#### 场景参数
+ bounce_threshold_velocity - 触发弹跳所需的相对速度。默认值为 0.2 m/s，在某些情况下，该值可能相当高。减少可以产生更自然的弹跳行为，例如在弹球的情况下。
+ friction_offset_threshold - 开始计算摩擦力的接触距离。默认值为 0.04 m。如果模拟的对象非常小，则应减小 ID。
+ friction_correlation_distance - 如果接触点之间的距离小于相关距离，则可以将接触点合并为单个摩擦锚点。默认值为 0.025 m。